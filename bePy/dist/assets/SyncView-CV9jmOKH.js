import{E as S,r as m,G as b,d as k,A as z,c as r,a as t,e as o,f as n,j as x,s as u,g as C,v as E,t as y,p as L,z as A,C as N,F as I,n as M,i as v,b as B,o as i}from"./index-yGufcrIO.js";import{a as h}from"./apiFetch-BMI3tozZ.js";import{R as w}from"./refresh-cw-DaE6hCM6.js";import{S as R}from"./settings-2-BgNnIGvk.js";import{C as j}from"./clock-CWllN3kU.js";import{Z as V}from"./zap-BF3SWnCg.js";import{c as _}from"./createLucideIcon-4rnBCt15.js";import{C as F}from"./circle-check-DFlDHtrQ.js";import{C as T}from"./circle-alert-D-KkhID4.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U=_("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const $=_("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),P=S("sync",()=>{const d=m(!1),s=m(60),l=m([]),p=m(!1);async function g(){try{const c=await h(`${b.BASE_URL}/api/sync/setting`);d.value=c.is_enabled,s.value=c.interval_minutes}catch{d.value=!1,s.value=60}}async function f(){const c={is_enabled:d.value,interval_minutes:s.value};await h(`${b.BASE_URL}/api/sync/setting`,{method:"POST",body:JSON.stringify(c)})}async function e(){const c=await h(`${b.BASE_URL}/api/logs`);l.value=c}async function a(){p.value=!0;try{await h(`${b.BASE_URL}/api/sync/now`,{method:"POST"}),await e()}finally{p.value=!1}}return{isAutoSyncEnabled:d,syncInterval:s,syncLogs:l,isSyncing:p,fetchSettings:g,saveSettings:f,fetchLogs:e,syncNow:a}}),D={class:"max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 pb-12"},G={class:"lg:col-span-1 space-y-6"},H={class:"glass-card p-6 overflow-hidden relative group"},Z={class:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform"},q={class:"text-lg font-bold mb-6 flex items-center gap-2"},J={class:"space-y-6 relative z-10"},K={class:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5"},Q={class:"relative"},W={class:"glass-card p-6 bg-gradient-to-br from-white/[0.03] to-teal-500/[0.02]"},X={class:"text-lg font-bold mb-4 flex items-center gap-2"},Y=["disabled"],tt={class:"lg:col-span-2 glass-card flex flex-col min-h-[500px] border-white/5"},et={class:"p-6 border-b border-white/5 bg-white/[0.02] flex items-center justify-between"},st={class:"text-xl font-bold flex items-center gap-2"},nt={class:"flex-1 p-6 overflow-y-auto custom-scrollbar bg-zinc-950/20"},at={key:0,class:"h-full flex flex-col items-center justify-center text-zinc-600 space-y-3"},ot={key:1,class:"space-y-4"},it={class:"max-h-[420px] overflow-y-auto space-y-4 pr-2"},lt={class:"mt-1"},ct={class:"flex-1 min-w-0"},rt={class:"flex items-center justify-between mb-1"},dt={class:"text-[10px] text-zinc-600 uppercase font-black tracking-widest"},pt={class:"text-zinc-300 text-sm break-words"},ut={key:0,class:"text-teal-500 mr-2 font-mono text-xs"},yt=k({__name:"SyncView",setup(d){const s=P(),l=N("notify");z(()=>{s.fetchSettings(),s.fetchLogs()});const p=async()=>{try{await s.saveSettings(),l("Config Saved","Synchronization parameters updated","success")}catch{l("Error","Failed to save configuration","error")}},g=async()=>{try{await s.syncNow(),l("Sync Complete","Manual sync cycle finished successfully","success")}catch{l("Error","Registration sync failure","error")}};return(f,e)=>(i(),r("div",D,[t("div",G,[t("div",H,[t("div",Z,[o(n(w),{class:"w-16 h-16 text-teal-500"})]),t("h3",q,[o(n(R),{class:"w-5 h-5 text-teal-400"}),e[2]||(e[2]=x(" Auto Sync ",-1))]),t("div",J,[t("div",K,[e[3]||(e[3]=t("div",null,[t("p",{class:"font-semibold text-zinc-200"},"Enable Synchronization"),t("p",{class:"text-xs text-zinc-500"},"Run sync automatically in background")],-1)),t("button",{onClick:e[0]||(e[0]=a=>n(s).isAutoSyncEnabled=!n(s).isAutoSyncEnabled),class:u(["w-12 h-6 rounded-full transition-all relative p-1",n(s).isAutoSyncEnabled?"bg-teal-500":"bg-zinc-800"])},[t("div",{class:u(["w-4 h-4 bg-white rounded-full transition-all shadow-md",n(s).isAutoSyncEnabled?"translate-x-6":"translate-x-0"])},null,2)],2)]),t("div",{class:u([{"opacity-50 pointer-events-none":!n(s).isAutoSyncEnabled},"transition-opacity"])},[e[4]||(e[4]=t("label",{class:"block text-xs font-bold text-zinc-500 uppercase tracking-widest mb-2 ml-1"},"Interval (Minutes)",-1)),t("div",Q,[C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n(s).syncInterval=a),type:"number",class:"w-full bg-white/5 border border-white/10 rounded-xl py-3 px-4 text-sm focus:outline-none focus:border-teal-500/50"},null,512),[[E,n(s).syncInterval]]),o(n(j),{class:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"})])],2),t("button",{onClick:p,class:"w-full py-3.5 bg-teal-500 text-zinc-950 font-bold rounded-xl shadow-lg shadow-teal-500/10 hover:bg-teal-400 active:scale-[0.98] transition-all"}," Save Configuration ")])]),t("div",W,[t("h3",X,[o(n(V),{class:"w-5 h-5 text-amber-400"}),e[5]||(e[5]=x(" Manual Override ",-1))]),e[6]||(e[6]=t("p",{class:"text-sm text-zinc-500 mb-6"}," Instantly trigger a synchronization cycle across all connected devices. ",-1)),t("button",{onClick:g,disabled:n(s).isSyncing,class:"w-full py-4 bg-zinc-800 border border-white/10 text-zinc-300 font-bold rounded-xl hover:bg-zinc-700 disabled:opacity-50 flex items-center justify-center gap-3 group transition-all"},[o(n(w),{class:u(["w-5 h-5",{"animate-spin":n(s).isSyncing}])},null,8,["class"]),t("span",null,y(n(s).isSyncing?"Sync in Progress...":"Synchronize Now"),1)],8,Y)])]),t("div",tt,[t("div",et,[t("h3",st,[o(n(U),{class:"w-5 h-5 text-teal-400"}),e[7]||(e[7]=x(" Sync History ",-1))]),e[8]||(e[8]=t("span",{class:"px-2 py-1 rounded-md bg-zinc-900 border border-white/10 text-[10px] text-zinc-500 font-black uppercase tracking-widest"},"Live Logs",-1))]),t("div",nt,[n(s).syncLogs.length===0?(i(),r("div",at,[o(n($),{class:"w-12 h-12 opacity-10"}),e[9]||(e[9]=t("p",{class:"italic"},"No records found. Sync events will appear here.",-1))])):(i(),r("div",ot,[t("div",it,[o(A,{name:"log"},{default:L(()=>[(i(!0),r(I,null,M(n(s).syncLogs,a=>(i(),r("div",{key:a.id,class:"flex items-start gap-4 p-4 rounded-xl bg-zinc-900/50 border border-white/5 hover:border-white/10 transition-all font-mono"},[t("div",lt,[a.is_success?(i(),v(n(F),{key:0,class:"w-4 h-4 text-emerald-500"})):(i(),v(n(T),{key:1,class:"w-4 h-4 text-rose-500"}))]),t("div",ct,[t("div",rt,[t("span",dt,y(new Date(a.sync_time).toLocaleString()),1),t("span",{class:u(["text-[10px] px-1.5 py-0.5 rounded",a.is_success?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"])},y(a.is_success?"Success":"Failed"),3)]),t("p",pt,[a.ip?(i(),r("span",ut,"["+y(a.ip)+"]",1)):B("",!0),x(" "+y(a.message),1)])])]))),128))]),_:1})])]))])])]))}}),kt=O(yt,[["__scopeId","data-v-8b8c57aa"]]);export{kt as default};
