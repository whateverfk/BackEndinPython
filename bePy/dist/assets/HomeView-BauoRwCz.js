import{d as A,A as T,r as v,B as U,c as x,a as e,e as r,j as z,f as o,t as i,b as w,F as E,n as P,p as C,T as B,C as H,x as W,o as u,s as _,w as L,g as b,v as g,D as q,i as F}from"./index-DEHT6mqA.js";import{u as R}from"./devices-Dr04_U9H.js";import{M as y}from"./monitor-Qw_HIcTz.js";import{c as D}from"./createLucideIcon-DO80ASjG.js";import{C as $}from"./circle-check-D28DJZ9q.js";import{S as K}from"./search-BO0GxHEC.js";import{C as O}from"./circle-alert-Aeg1hjDG.js";import{U as Q}from"./user-CR_Y9Ov9.js";import{T as X}from"./trash-2-CTP8VSsg.js";import{X as G}from"./x-BkwpVxN4.js";import{L as J}from"./loader-circle-Dl9qWb31.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./apiFetch-BMI3tozZ.js";const Z=D("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const ee=D("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),te={class:"max-w-7xl mx-auto space-y-10 pb-20"},se={class:"flex items-center justify-between"},oe={class:"text-3xl font-black text-zinc-100 flex items-center gap-4"},ae={class:"w-12 h-12 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/20"},le={class:"grid grid-cols-1 xl:grid-cols-4 gap-8"},re={class:"xl:col-span-1 space-y-6"},ne={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},ie={class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform"},de={class:"w-14 h-14 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/10"},ce={class:"text-3xl font-black text-zinc-100"},pe={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},ue={class:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/10"},xe={class:"text-3xl font-black text-zinc-100"},be={class:"xl:col-span-3 glass-card overflow-hidden border-white/5"},fe={class:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.01]"},me={class:"flex items-center gap-3"},he={class:"relative"},ve={class:"overflow-x-auto"},ge={class:"w-full text-left text-sm"},we={class:"divide-y divide-white/5"},_e={class:"px-8 py-5"},ye={class:"font-mono font-bold text-zinc-200"},ke={class:"text-[10px] text-zinc-500 uppercase font-black tracking-tighter"},ze={class:"px-8 py-5 font-mono text-zinc-400"},Ce={class:"px-8 py-5"},De={class:"flex items-center gap-2"},Ie={class:"text-zinc-300 font-medium"},Me={class:"px-8 py-5"},Ve=["onClick"],Ne={class:"px-8 py-5 text-right"},Se={class:"flex items-center justify-end gap-2"},je=["onClick"],Ae=["onClick"],Te={key:0},Ue={colspan:"5",class:"px-8 py-20 text-center"},Ee={class:"flex flex-col items-center gap-4 opacity-20"},Pe={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6"},Be={class:"glass-card w-full max-w-lg p-10 relative z-10 border-teal-500/20 shadow-4xl animate-in zoom-in-95 duration-200"},He={class:"flex items-center justify-between mb-8"},We={class:"text-2xl font-black text-zinc-100 tracking-tight"},Le={class:"text-zinc-500 text-sm mt-1"},qe={class:"col-span-1"},Fe={class:"col-span-1"},Re={class:"col-span-1"},$e={class:"col-span-1"},Ke=["required"],Oe={class:"col-span-2"},Qe={class:"col-span-2 flex gap-4 mt-6"},Xe=["disabled"],Ge=A({__name:"HomeView",setup(Je){T(()=>{n.fetchDevices()});const n=R(),d=H("notify"),f=v(!1),c=v(!1),m=v(null),p=v(!1),a=U({ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),I=()=>{c.value=!1,m.value=null,Object.assign(a,{ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),f.value=!0},M=l=>{c.value=!0,m.value=l.id,Object.assign(a,{...l,password:""}),f.value=!0},h=()=>{f.value=!1},V=async()=>{p.value=!0;try{const l=await n.testConnection(a);if(!l.ip_reachable){d("Network Unreachable",l.message||"Cannot reach device IP","error"),p.value=!1;return}if(!l.auth_ok){d("Authentication Failed",l.message||"Invalid credentials or unsupported brand","error"),p.value=!1;return}if(c.value&&m.value!==null){const t={...a};t.password||delete t.password,await n.updateDevice(m.value,t),d("Success","Infrastructure parameters updated","success")}else await n.addDevice({...a}),d("Success","New device integrated into network","success");h()}catch(l){d("Error",l.message||"Failed to commit changes to core","error")}finally{p.value=!1}},N=async l=>{try{const t=!l.status;await n.updateDevice(l.id,{status:t}),d("",`Device hardware is now ${t?"online":"paused"}`,"success")}catch{d("Toggle Failed","Could not update status","error")}},S=async l=>{confirm("Are you absolutely sure you want to purge this device from the network?")&&(await n.deleteDevice(l),d("Purged","Device removed from infrastructure registry","info"))};return(l,t)=>{const j=W("router-link");return u(),x("div",te,[e("div",se,[e("h2",oe,[e("div",ae,[r(o(y),{class:"w-7 h-7"})]),t[5]||(t[5]=z(" Device Management ",-1))]),e("button",{onClick:I,class:"bg-teal-500 hover:bg-teal-400 text-zinc-950 px-6 py-3 rounded-2xl font-bold flex items-center gap-2 shadow-lg shadow-teal-500/20 transition-all active:scale-95"},[r(o(ee),{class:"w-5 h-5"}),t[6]||(t[6]=z(" Add Device ",-1))])]),e("div",le,[e("div",re,[e("div",ne,[e("div",ie,[r(o(y),{class:"w-24 h-24 text-teal-500"})]),e("div",de,[r(o(y),{class:"w-7 h-7"})]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Total Devices ",-1)),e("p",ce,i(o(n).devices.length),1)])]),e("div",pe,[t[9]||(t[9]=e("div",{class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform text-emerald-500"},[e("div",{class:"w-24 h-24 rounded-full border-8 border-current opacity-10"})],-1)),e("div",ue,[r(o($),{class:"w-7 h-7"})]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Selected Device ",-1)),e("p",xe,i(o(n).devices.filter(s=>s.status).length),1)])]),t[10]||(t[10]=e("div",{class:"glass-card p-8 border-white/5 bg-gradient-to-br from-teal-500/5 to-transparent"},[e("h4",{class:"font-bold text-lg mb-4"},"Quick Tip"),e("p",{class:"text-sm text-zinc-500 leading-relaxed"}," Bấm vào device Ip để xem thông tin chi tiết, live view, device log ... ")],-1))]),e("div",be,[e("div",fe,[t[12]||(t[12]=e("h3",{class:"text-xl font-bold"},"Network Inventory",-1)),e("div",me,[e("div",he,[r(o(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),t[11]||(t[11]=e("input",{type:"text",placeholder:"Search devices...",class:"bg-zinc-900 border border-white/5 rounded-xl py-2 pl-10 pr-4 text-xs focus:outline-none focus:border-teal-500/30 w-64 transition-all"},null,-1))])])]),e("div",ve,[e("table",ge,[t[14]||(t[14]=e("thead",null,[e("tr",{class:"text-zinc-500 border-b border-white/5 bg-zinc-950/20"},[e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," NVR Address "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," Web Access "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Identity"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Select"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-right"}," Actions ")])],-1)),e("tbody",we,[(u(!0),x(E,null,P(o(n).devices,s=>(u(),x("tr",{key:s.id,class:"hover:bg-teal-500/[0.02] transition-all group"},[e("td",_e,[r(j,{to:`/device/${s.id}`,class:"flex flex-col hover:text-teal-400 transition-colors"},{default:C(()=>[e("span",ye,i(s.ipNvr),1),e("span",ke,i(s.brand),1)]),_:2},1032,["to"])]),e("td",ze,i(s.ipWeb),1),e("td",Ce,[e("div",De,[r(o(Q),{class:"w-3.5 h-3.5 text-zinc-600"}),e("span",Ie,i(s.username),1)])]),e("td",Me,[e("button",{onClick:k=>N(s),class:_(["relative w-11 h-6 transition-colors rounded-full p-1",s.status?"bg-emerald-500/20 border border-emerald-500/30":"bg-zinc-800 border border-white/5"])},[e("div",{class:_(["w-4 h-4 rounded-full transition-transform shadow-sm",[s.status?"translate-x-5 bg-emerald-400 shadow-emerald-500/50":"translate-x-0 bg-zinc-500"]])},null,2),e("span",{class:_(["absolute left-full ml-3 text-[10px] font-black uppercase tracking-widest",s.status?"text-emerald-400":"text-zinc-600"])},i((s.status,"")),3)],10,Ve)]),e("td",Ne,[e("div",Se,[e("button",{onClick:k=>M(s),class:"p-2.5 rounded-xl hover:bg-teal-500/10 text-zinc-600 hover:text-teal-400 transition-all border border-transparent hover:border-teal-500/20",title:"Edit Configuration"},[r(o(Z),{class:"w-4.5 h-4.5"})],8,je),e("button",{onClick:k=>S(s.id),class:"p-2.5 rounded-xl hover:bg-rose-500/10 text-zinc-600 hover:text-rose-400 transition-all border border-transparent hover:border-rose-500/20",title:"Purge Device"},[r(o(X),{class:"w-4.5 h-4.5"})],8,Ae)])])]))),128)),o(n).devices.length===0?(u(),x("tr",Te,[e("td",Ue,[e("div",Ee,[r(o(O),{class:"w-16 h-16"}),t[13]||(t[13]=e("p",{class:"font-bold text-xl uppercase tracking-[0.2em]"},"No hardware detected",-1))])])])):w("",!0)])])])])]),r(B,{name:"modal"},{default:C(()=>[f.value?(u(),x("div",Pe,[e("div",{class:"absolute inset-0 bg-zinc-950/80 backdrop-blur-md",onClick:h}),e("div",Be,[e("div",He,[e("div",null,[e("h3",We,i(c.value?"Modify Infrastructure":"Register New Device"),1),e("p",Le,i(c.value?"Update existing hardware parameters and credentials.":"Integrate a new camera system into your network cluster."),1)]),e("button",{onClick:h,class:"text-zinc-600 hover:text-rose-400 transition-colors"},[r(o(G),{class:"w-8 h-8"})])]),e("form",{onSubmit:L(V,["prevent"]),class:"grid grid-cols-2 gap-6"},[e("div",qe,[t[15]||(t[15]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"NVR Interface IP",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.ipNvr=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50"},null,512),[[g,a.ipNvr]])]),e("div",Fe,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Web Management IP",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.ipWeb=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"192.168.1.xxx"},null,512),[[g,a.ipWeb]])]),e("div",Re,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Security Username",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.username=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"admin"},null,512),[[g,a.username]])]),e("div",$e,[t[18]||(t[18]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Access Token / Password",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.password=s),required:!c.value,type:"password",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50"},null,8,Ke),[[g,a.password]])]),e("div",Oe,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Hardware Brand Entity",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.brand=s),class:"w-full bg-zinc-950 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50 appearance-none text-zinc-300"},[...t[19]||(t[19]=[e("option",{value:"HIKVision"},"HIKVision",-1)])],512),[[q,a.brand]])]),e("div",Qe,[e("button",{type:"button",onClick:h,class:"flex-1 py-4 bg-zinc-900 text-zinc-400 font-bold rounded-2xl hover:bg-zinc-800 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:p.value,class:"flex-1 py-4 bg-teal-500 text-zinc-950 font-bold rounded-2xl shadow-xl shadow-teal-500/20 hover:bg-teal-400 transition-all flex items-center justify-center gap-2"},[p.value?(u(),F(o(J),{key:0,class:"w-5 h-5 animate-spin"})):w("",!0),e("span",null,i(c.value?"Apply Changes":"Execute Registration"),1)],8,Xe)])],32)])])):w("",!0)]),_:1})])}}}),pt=Y(Ge,[["__scopeId","data-v-f5ca0319"]]);export{pt as default};
