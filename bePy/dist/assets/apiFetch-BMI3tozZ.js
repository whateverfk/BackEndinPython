function i(){return localStorage.getItem("token")}function c(){localStorage.removeItem("token"),window.location.href="/login"}async function s(r,e={}){const n=i(),t=await fetch(r,{...e,headers:{...e.headers||{},Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!t.ok){if(t.status===401)throw c(),new Error("Unauthorized - Redirecting to login");const a=await t.text();throw new Error(a||"API error")}const o=await t.text();return o?JSON.parse(o):{}}export{s as a};
