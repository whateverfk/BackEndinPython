import{d as T,A as P,r as b,l as W,B,c as m,a as e,e as r,j as I,f as a,t as n,g as f,v as y,b as _,F as H,n as q,p as N,T as $,C as F,x as R,o as d,s as k,w as K,h as O,i as z,D as Q}from"./index-DaBQWeQ5.js";import{u as X}from"./devices-Us2zTJG6.js";import{M as C}from"./monitor-DIyMd7vK.js";import{c as V}from"./createLucideIcon--Iw1VYji.js";import{C as G}from"./circle-check-DQwgXYHI.js";import{S as J}from"./search-D2tcgAFF.js";import{C as Y}from"./circle-alert-CzPZCpTb.js";import{U as Z}from"./user-DPIhdy1T.js";import{T as ee}from"./trash-2-DSFmgApq.js";import{X as te}from"./x-HpUhb2b7.js";import{E as se,a as oe}from"./eye-CSUDj-3F.js";import{L as ae}from"./loader-circle-DXuX8_sP.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./apiFetch-g2B7VU1-.js";const re=V("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const ne=V("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ie={class:"max-w-7xl mx-auto space-y-10 pb-20"},ce={class:"flex items-center justify-between"},de={class:"text-3xl font-black text-zinc-100 flex items-center gap-4"},ue={class:"w-12 h-12 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/20"},pe={class:"grid grid-cols-1 xl:grid-cols-4 gap-8"},xe={class:"xl:col-span-1 space-y-6"},be={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},fe={class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform"},me={class:"w-14 h-14 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/10"},he={class:"text-3xl font-black text-zinc-100"},ve={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},we={class:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/10"},ge={class:"text-3xl font-black text-zinc-100"},ye={class:"xl:col-span-3 glass-card overflow-hidden border-white/5"},_e={class:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.01]"},ke={class:"flex items-center gap-3"},ze={class:"relative"},Ce={class:"overflow-x-auto"},De={class:"w-full text-left text-sm"},Me={class:"divide-y divide-white/5"},Ie={class:"px-8 py-5"},Ne={class:"font-mono font-bold text-zinc-200"},Ve={class:"text-[10px] text-zinc-500 uppercase font-black tracking-tighter"},Se={class:"px-8 py-5 font-mono text-zinc-400"},je={class:"px-8 py-5"},Ae={class:"flex items-center gap-2"},Ee={class:"text-zinc-300 font-medium"},Le={class:"px-8 py-5"},Ue=["onClick"],Te={class:"px-8 py-5 text-right"},Pe={class:"flex items-center justify-end gap-2"},We=["onClick"],Be=["onClick"],He={key:0},qe={colspan:"5",class:"px-8 py-20 text-center"},$e={class:"flex flex-col items-center gap-4 opacity-20"},Fe={class:"font-bold text-xl uppercase tracking-[0.2em]"},Re={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6"},Ke={class:"glass-card w-full max-w-lg p-10 relative z-10 border-teal-500/20 shadow-4xl animate-in zoom-in-95 duration-200"},Oe={class:"flex items-center justify-between mb-8"},Qe={class:"text-2xl font-black text-zinc-100 tracking-tight"},Xe={class:"text-zinc-500 text-sm mt-1"},Ge={class:"col-span-1"},Je={class:"col-span-1"},Ye={class:"col-span-1"},Ze={class:"col-span-1"},et={class:"relative"},tt=["required","type"],st={class:"col-span-2"},ot={class:"col-span-2 flex gap-4 mt-6"},at=["disabled"],lt=T({__name:"HomeView",setup(rt){P(()=>{i.fetchDevices()});const i=X(),c=F("notify"),h=b(!1),u=b(!1),v=b(null),p=b(!1),w=b(""),x=b(!1),D=W(()=>{const o=w.value.toLowerCase().trim();return o?i.devices.filter(t=>t.ipNvr?.toLowerCase().includes(o)||t.ipWeb?.toLowerCase().includes(o)||t.brand?.toLowerCase().includes(o)||t.username?.toLowerCase().includes(o)):i.devices}),l=B({ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),S=()=>{u.value=!1,v.value=null,x.value=!1,Object.assign(l,{ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),h.value=!0},j=o=>{u.value=!0,v.value=o.id,x.value=!1,Object.assign(l,{...o,password:""}),h.value=!0},g=()=>{h.value=!1},A=async()=>{p.value=!0;try{const o=await i.testConnection(l);if(!o.ip_reachable){c("Network Unreachable",o.message||"Cannot reach device IP","error"),p.value=!1;return}if(!o.auth_ok){c("Authentication Failed",o.message||"Invalid credentials or unsupported brand","error"),p.value=!1;return}if(u.value&&v.value!==null){const t={...l};t.password||delete t.password,await i.updateDevice(v.value,t),c("Success","Infrastructure parameters updated","success")}else await i.addDevice({...l}),c("Success","New device integrated into network","success");g()}catch(o){c("Error",o.message||"Failed to commit changes to core","error")}finally{p.value=!1}},E=async o=>{try{const t=!o.status;await i.updateDevice(o.id,{status:t}),c("",`Device hardware đã được  ${t?"chọn":"tắt"}`,"success")}catch{c("Toggle Failed","Could not update status","error")}},L=async o=>{confirm("Are you absolutely sure you want to purge this device from the network?")&&(await i.deleteDevice(o),c("Purged","Device removed from infrastructure registry","info"))};return(o,t)=>{const U=R("router-link");return d(),m("div",ie,[e("div",ce,[e("h2",de,[e("div",ue,[r(a(C),{class:"w-7 h-7"})]),t[7]||(t[7]=I(" Device Management ",-1))]),e("button",{onClick:S,class:"bg-teal-500 hover:bg-teal-400 text-zinc-950 px-6 py-3 rounded-2xl font-bold flex items-center gap-2 shadow-lg shadow-teal-500/20 transition-all active:scale-95"},[r(a(ne),{class:"w-5 h-5"}),t[8]||(t[8]=I(" Add Device ",-1))])]),e("div",pe,[e("div",xe,[e("div",be,[e("div",fe,[r(a(C),{class:"w-24 h-24 text-teal-500"})]),e("div",me,[r(a(C),{class:"w-7 h-7"})]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Total Devices ",-1)),e("p",he,n(a(i).devices.length),1)])]),e("div",ve,[t[11]||(t[11]=e("div",{class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform text-emerald-500"},[e("div",{class:"w-24 h-24 rounded-full border-8 border-current opacity-10"})],-1)),e("div",we,[r(a(G),{class:"w-7 h-7"})]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Selected Device ",-1)),e("p",ge,n(a(i).devices.filter(s=>s.status).length),1)])]),t[12]||(t[12]=e("div",{class:"glass-card p-8 border-white/5 bg-gradient-to-br from-teal-500/5 to-transparent"},[e("h4",{class:"font-bold text-lg mb-4"},"Quick Tip"),e("p",{class:"text-sm text-zinc-500 leading-relaxed"}," Bấm vào device Ip để xem thông tin chi tiết, live view, device log ... ")],-1))]),e("div",ye,[e("div",_e,[t[13]||(t[13]=e("h3",{class:"text-xl font-bold"},"Network Inventory",-1)),e("div",ke,[e("div",ze,[r(a(J),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),type:"text",placeholder:"Search devices...",class:"bg-zinc-900 border border-white/5 rounded-xl py-2 pl-10 pr-4 text-xs focus:outline-none focus:border-teal-500/30 w-64 transition-all"},null,512),[[y,w.value]])])])]),e("div",Ce,[e("table",De,[t[14]||(t[14]=e("thead",null,[e("tr",{class:"text-zinc-500 border-b border-white/5 bg-zinc-950/20"},[e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," NVR Address "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," Web Access "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Identity"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Select"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-right"}," Actions ")])],-1)),e("tbody",Me,[(d(!0),m(H,null,q(D.value,s=>(d(),m("tr",{key:s.id,class:"hover:bg-teal-500/[0.02] transition-all group"},[e("td",Ie,[r(U,{to:`/device/${s.id}`,class:"flex flex-col hover:text-teal-400 transition-colors"},{default:N(()=>[e("span",Ne,n(s.ipNvr),1),e("span",Ve,n(s.brand),1)]),_:2},1032,["to"])]),e("td",Se,n(s.ipWeb),1),e("td",je,[e("div",Ae,[r(a(Z),{class:"w-3.5 h-3.5 text-zinc-600"}),e("span",Ee,n(s.username),1)])]),e("td",Le,[e("button",{onClick:M=>E(s),class:k(["relative w-11 h-6 transition-colors rounded-full p-1",s.status?"bg-emerald-500/20 border border-emerald-500/30":"bg-zinc-800 border border-white/5"])},[e("div",{class:k(["w-4 h-4 rounded-full transition-transform shadow-sm",[s.status?"translate-x-5 bg-emerald-400 shadow-emerald-500/50":"translate-x-0 bg-zinc-500"]])},null,2),e("span",{class:k(["absolute left-full ml-3 text-[10px] font-black uppercase tracking-widest",s.status?"text-emerald-400":"text-zinc-600"])},n((s.status,"")),3)],10,Ue)]),e("td",Te,[e("div",Pe,[e("button",{onClick:M=>j(s),class:"p-2.5 rounded-xl hover:bg-teal-500/10 text-zinc-600 hover:text-teal-400 transition-all border border-transparent hover:border-teal-500/20",title:"Edit Configuration"},[r(a(re),{class:"w-4.5 h-4.5"})],8,We),e("button",{onClick:M=>L(s.id),class:"p-2.5 rounded-xl hover:bg-rose-500/10 text-zinc-600 hover:text-rose-400 transition-all border border-transparent hover:border-rose-500/20",title:"Purge Device"},[r(a(ee),{class:"w-4.5 h-4.5"})],8,Be)])])]))),128)),D.value.length===0?(d(),m("tr",He,[e("td",qe,[e("div",$e,[r(a(Y),{class:"w-16 h-16"}),e("p",Fe,n(w.value?"No matching hardware":"No hardware detected"),1)])])])):_("",!0)])])])])]),r($,{name:"modal"},{default:N(()=>[h.value?(d(),m("div",Re,[e("div",{class:"absolute inset-0 bg-zinc-950/80 backdrop-blur-md",onClick:g}),e("div",Ke,[e("div",Oe,[e("div",null,[e("h3",Qe,n(u.value?"Modify Infrastructure":"Register New Device"),1),e("p",Xe,n(u.value?"Update existing hardware parameters and credentials.":"Integrate a new camera system into your network cluster."),1)]),e("button",{onClick:g,class:"text-zinc-600 hover:text-rose-400 transition-colors"},[r(a(te),{class:"w-8 h-8"})])]),e("form",{onSubmit:K(A,["prevent"]),class:"grid grid-cols-2 gap-6"},[e("div",Ge,[t[15]||(t[15]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"NVR Interface IP",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.ipNvr=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"192.168.1.xxx"},null,512),[[y,l.ipNvr]])]),e("div",Je,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Web Management IP",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.ipWeb=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"192.168.1.xxx"},null,512),[[y,l.ipWeb]])]),e("div",Ye,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Security Username",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.username=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"admin"},null,512),[[y,l.username]])]),e("div",Ze,[t[18]||(t[18]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Access Token / Password",-1)),e("div",et,[f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.password=s),required:!u.value,type:x.value?"text":"password",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 pr-12 text-sm focus:outline-none focus:border-teal-500/50"},null,8,tt),[[O,l.password]]),e("button",{type:"button",onClick:t[5]||(t[5]=s=>x.value=!x.value),class:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-teal-400 transition-colors"},[x.value?(d(),z(a(oe),{key:1,class:"w-4 h-4"})):(d(),z(a(se),{key:0,class:"w-4 h-4"}))])])]),e("div",st,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Hardware Brand Entity",-1)),f(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.brand=s),class:"w-full bg-zinc-950 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50 appearance-none text-zinc-300"},[...t[19]||(t[19]=[e("option",{value:"HIKVision"},"HIKVision",-1)])],512),[[Q,l.brand]])]),e("div",ot,[e("button",{type:"button",onClick:g,class:"flex-1 py-4 bg-zinc-900 text-zinc-400 font-bold rounded-2xl hover:bg-zinc-800 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:p.value,class:"flex-1 py-4 bg-teal-500 text-zinc-950 font-bold rounded-2xl shadow-xl shadow-teal-500/20 hover:bg-teal-400 transition-all flex items-center justify-center gap-2"},[p.value?(d(),z(a(ae),{key:0,class:"w-5 h-5 animate-spin"})):_("",!0),e("span",null,n(u.value?"Apply Changes":"Execute Registration"),1)],8,at)])],32)])])):_("",!0)]),_:1})])}}}),yt=le(lt,[["__scopeId","data-v-477a7e30"]]);export{yt as default};
