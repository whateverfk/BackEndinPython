import{d as U,A as T,r as b,l as E,B as P,c as f,a as e,e as r,j as D,f as l,t as n,g as p,v as m,b as _,F as W,n as B,p as I,T as H,C as q,x as F,o as x,s as y,w as R,D as $,i as K}from"./index-DYBdWwKe.js";import{u as O}from"./devices-B00KybqP.js";import{M as k}from"./monitor-CpM87-OH.js";import{c as M}from"./createLucideIcon-CV4Mlnd1.js";import{C as Q}from"./circle-check-C3U8JU1W.js";import{S as X}from"./search-xLUvmh0u.js";import{C as G}from"./circle-alert-Cv7XqscH.js";import{U as J}from"./user-CVxMZxkC.js";import{T as Y}from"./trash-2-D5TqBB95.js";import{X as Z}from"./x-Aiy4e1xk.js";import{L as ee}from"./loader-circle-BDSPZxwS.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./apiFetch-Cx3_busd.js";const se=M("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const oe=M("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ae={class:"max-w-7xl mx-auto space-y-10 pb-20"},le={class:"flex items-center justify-between"},re={class:"text-3xl font-black text-zinc-100 flex items-center gap-4"},ne={class:"w-12 h-12 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/20"},ie={class:"grid grid-cols-1 xl:grid-cols-4 gap-8"},ce={class:"xl:col-span-1 space-y-6"},de={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},ue={class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform"},pe={class:"w-14 h-14 rounded-2xl bg-teal-500/10 flex items-center justify-center text-teal-400 border border-teal-500/10"},xe={class:"text-3xl font-black text-zinc-100"},be={class:"glass-card p-6 flex items-center gap-4 border-white/5 relative overflow-hidden group"},fe={class:"w-14 h-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/10"},me={class:"text-3xl font-black text-zinc-100"},he={class:"xl:col-span-3 glass-card overflow-hidden border-white/5"},ve={class:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.01]"},we={class:"flex items-center gap-3"},ge={class:"relative"},_e={class:"overflow-x-auto"},ye={class:"w-full text-left text-sm"},ke={class:"divide-y divide-white/5"},ze={class:"px-8 py-5"},Ce={class:"font-mono font-bold text-zinc-200"},De={class:"text-[10px] text-zinc-500 uppercase font-black tracking-tighter"},Ie={class:"px-8 py-5 font-mono text-zinc-400"},Me={class:"px-8 py-5"},Ne={class:"flex items-center gap-2"},Ve={class:"text-zinc-300 font-medium"},Se={class:"px-8 py-5"},je=["onClick"],Ae={class:"px-8 py-5 text-right"},Le={class:"flex items-center justify-end gap-2"},Ue=["onClick"],Te=["onClick"],Ee={key:0},Pe={colspan:"5",class:"px-8 py-20 text-center"},We={class:"flex flex-col items-center gap-4 opacity-20"},Be={class:"font-bold text-xl uppercase tracking-[0.2em]"},He={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6"},qe={class:"glass-card w-full max-w-lg p-10 relative z-10 border-teal-500/20 shadow-4xl animate-in zoom-in-95 duration-200"},Fe={class:"flex items-center justify-between mb-8"},Re={class:"text-2xl font-black text-zinc-100 tracking-tight"},$e={class:"text-zinc-500 text-sm mt-1"},Ke={class:"col-span-1"},Oe={class:"col-span-1"},Qe={class:"col-span-1"},Xe={class:"col-span-1"},Ge=["required"],Je={class:"col-span-2"},Ye={class:"col-span-2 flex gap-4 mt-6"},Ze=["disabled"],et=U({__name:"HomeView",setup(tt){T(()=>{i.fetchDevices()});const i=O(),c=q("notify"),h=b(!1),d=b(!1),v=b(null),u=b(!1),w=b(""),z=E(()=>{const o=w.value.toLowerCase().trim();return o?i.devices.filter(t=>t.ipNvr?.toLowerCase().includes(o)||t.ipWeb?.toLowerCase().includes(o)||t.brand?.toLowerCase().includes(o)||t.username?.toLowerCase().includes(o)):i.devices}),a=P({ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),N=()=>{d.value=!1,v.value=null,Object.assign(a,{ipNvr:"",ipWeb:"",username:"",password:"",brand:"HIKVision"}),h.value=!0},V=o=>{d.value=!0,v.value=o.id,Object.assign(a,{...o,password:""}),h.value=!0},g=()=>{h.value=!1},S=async()=>{u.value=!0;try{const o=await i.testConnection(a);if(!o.ip_reachable){c("Network Unreachable",o.message||"Cannot reach device IP","error"),u.value=!1;return}if(!o.auth_ok){c("Authentication Failed",o.message||"Invalid credentials or unsupported brand","error"),u.value=!1;return}if(d.value&&v.value!==null){const t={...a};t.password||delete t.password,await i.updateDevice(v.value,t),c("Success","Infrastructure parameters updated","success")}else await i.addDevice({...a}),c("Success","New device integrated into network","success");g()}catch(o){c("Error",o.message||"Failed to commit changes to core","error")}finally{u.value=!1}},j=async o=>{try{const t=!o.status;await i.updateDevice(o.id,{status:t}),c("",`Device hardware đã được  ${t?"chọn":"tắt"}`,"success")}catch{c("Toggle Failed","Could not update status","error")}},A=async o=>{confirm("Are you absolutely sure you want to purge this device from the network?")&&(await i.deleteDevice(o),c("Purged","Device removed from infrastructure registry","info"))};return(o,t)=>{const L=F("router-link");return x(),f("div",ae,[e("div",le,[e("h2",re,[e("div",ne,[r(l(k),{class:"w-7 h-7"})]),t[6]||(t[6]=D(" Device Management ",-1))]),e("button",{onClick:N,class:"bg-teal-500 hover:bg-teal-400 text-zinc-950 px-6 py-3 rounded-2xl font-bold flex items-center gap-2 shadow-lg shadow-teal-500/20 transition-all active:scale-95"},[r(l(oe),{class:"w-5 h-5"}),t[7]||(t[7]=D(" Add Device ",-1))])]),e("div",ie,[e("div",ce,[e("div",de,[e("div",ue,[r(l(k),{class:"w-24 h-24 text-teal-500"})]),e("div",pe,[r(l(k),{class:"w-7 h-7"})]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Total Devices ",-1)),e("p",xe,n(l(i).devices.length),1)])]),e("div",be,[t[10]||(t[10]=e("div",{class:"absolute -right-4 -bottom-4 opacity-5 group-hover:scale-110 transition-transform text-emerald-500"},[e("div",{class:"w-24 h-24 rounded-full border-8 border-current opacity-10"})],-1)),e("div",fe,[r(l(Q),{class:"w-7 h-7"})]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 mb-0.5"}," Selected Device ",-1)),e("p",me,n(l(i).devices.filter(s=>s.status).length),1)])]),t[11]||(t[11]=e("div",{class:"glass-card p-8 border-white/5 bg-gradient-to-br from-teal-500/5 to-transparent"},[e("h4",{class:"font-bold text-lg mb-4"},"Quick Tip"),e("p",{class:"text-sm text-zinc-500 leading-relaxed"}," Bấm vào device Ip để xem thông tin chi tiết, live view, device log ... ")],-1))]),e("div",he,[e("div",ve,[t[12]||(t[12]=e("h3",{class:"text-xl font-bold"},"Network Inventory",-1)),e("div",we,[e("div",ge,[r(l(X),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600"}),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),type:"text",placeholder:"Search devices...",class:"bg-zinc-900 border border-white/5 rounded-xl py-2 pl-10 pr-4 text-xs focus:outline-none focus:border-teal-500/30 w-64 transition-all"},null,512),[[m,w.value]])])])]),e("div",_e,[e("table",ye,[t[13]||(t[13]=e("thead",null,[e("tr",{class:"text-zinc-500 border-b border-white/5 bg-zinc-950/20"},[e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," NVR Address "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"}," Web Access "),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Identity"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px]"},"Select"),e("th",{class:"px-8 py-5 font-black uppercase tracking-widest text-[10px] text-right"}," Actions ")])],-1)),e("tbody",ke,[(x(!0),f(W,null,B(z.value,s=>(x(),f("tr",{key:s.id,class:"hover:bg-teal-500/[0.02] transition-all group"},[e("td",ze,[r(L,{to:`/device/${s.id}`,class:"flex flex-col hover:text-teal-400 transition-colors"},{default:I(()=>[e("span",Ce,n(s.ipNvr),1),e("span",De,n(s.brand),1)]),_:2},1032,["to"])]),e("td",Ie,n(s.ipWeb),1),e("td",Me,[e("div",Ne,[r(l(J),{class:"w-3.5 h-3.5 text-zinc-600"}),e("span",Ve,n(s.username),1)])]),e("td",Se,[e("button",{onClick:C=>j(s),class:y(["relative w-11 h-6 transition-colors rounded-full p-1",s.status?"bg-emerald-500/20 border border-emerald-500/30":"bg-zinc-800 border border-white/5"])},[e("div",{class:y(["w-4 h-4 rounded-full transition-transform shadow-sm",[s.status?"translate-x-5 bg-emerald-400 shadow-emerald-500/50":"translate-x-0 bg-zinc-500"]])},null,2),e("span",{class:y(["absolute left-full ml-3 text-[10px] font-black uppercase tracking-widest",s.status?"text-emerald-400":"text-zinc-600"])},n((s.status,"")),3)],10,je)]),e("td",Ae,[e("div",Le,[e("button",{onClick:C=>V(s),class:"p-2.5 rounded-xl hover:bg-teal-500/10 text-zinc-600 hover:text-teal-400 transition-all border border-transparent hover:border-teal-500/20",title:"Edit Configuration"},[r(l(se),{class:"w-4.5 h-4.5"})],8,Ue),e("button",{onClick:C=>A(s.id),class:"p-2.5 rounded-xl hover:bg-rose-500/10 text-zinc-600 hover:text-rose-400 transition-all border border-transparent hover:border-rose-500/20",title:"Purge Device"},[r(l(Y),{class:"w-4.5 h-4.5"})],8,Te)])])]))),128)),z.value.length===0?(x(),f("tr",Ee,[e("td",Pe,[e("div",We,[r(l(G),{class:"w-16 h-16"}),e("p",Be,n(w.value?"No matching hardware":"No hardware detected"),1)])])])):_("",!0)])])])])]),r(H,{name:"modal"},{default:I(()=>[h.value?(x(),f("div",He,[e("div",{class:"absolute inset-0 bg-zinc-950/80 backdrop-blur-md",onClick:g}),e("div",qe,[e("div",Fe,[e("div",null,[e("h3",Re,n(d.value?"Modify Infrastructure":"Register New Device"),1),e("p",$e,n(d.value?"Update existing hardware parameters and credentials.":"Integrate a new camera system into your network cluster."),1)]),e("button",{onClick:g,class:"text-zinc-600 hover:text-rose-400 transition-colors"},[r(l(Z),{class:"w-8 h-8"})])]),e("form",{onSubmit:R(S,["prevent"]),class:"grid grid-cols-2 gap-6"},[e("div",Ke,[t[14]||(t[14]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"NVR Interface IP",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.ipNvr=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"192.168.1.xxx"},null,512),[[m,a.ipNvr]])]),e("div",Oe,[t[15]||(t[15]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Web Management IP",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.ipWeb=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"192.168.1.xxx"},null,512),[[m,a.ipWeb]])]),e("div",Qe,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Security Username",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.username=s),required:"",type:"text",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50",placeholder:"admin"},null,512),[[m,a.username]])]),e("div",Xe,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Access Token / Password",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.password=s),required:!d.value,type:"password",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50"},null,8,Ge),[[m,a.password]])]),e("div",Je,[t[19]||(t[19]=e("label",{class:"block text-[10px] font-black uppercase text-zinc-600 tracking-widest mb-2 ml-1"},"Hardware Brand Entity",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.brand=s),class:"w-full bg-zinc-950 border border-white/10 rounded-2xl py-3.5 px-5 text-sm focus:outline-none focus:border-teal-500/50 appearance-none text-zinc-300"},[...t[18]||(t[18]=[e("option",{value:"HIKVision"},"HIKVision",-1)])],512),[[$,a.brand]])]),e("div",Ye,[e("button",{type:"button",onClick:g,class:"flex-1 py-4 bg-zinc-900 text-zinc-400 font-bold rounded-2xl hover:bg-zinc-800 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:u.value,class:"flex-1 py-4 bg-teal-500 text-zinc-950 font-bold rounded-2xl shadow-xl shadow-teal-500/20 hover:bg-teal-400 transition-all flex items-center justify-center gap-2"},[u.value?(x(),K(l(ee),{key:0,class:"w-5 h-5 animate-spin"})):_("",!0),e("span",null,n(d.value?"Apply Changes":"Execute Registration"),1)],8,Ze)])],32)])])):_("",!0)]),_:1})])}}}),ft=te(et,[["__scopeId","data-v-3efd2d7f"]]);export{ft as default};
